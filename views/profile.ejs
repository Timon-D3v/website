<% // Prerender // 
// User //

var isLoggedIn = true,
    username = user.username,
    first_name = user.first_name,
    last_name = user.last_name,
    password = user.password,
    email = user.email,
    phone_number = user.phone_number,
    account_created = user.account_created,
    darkmode = user.settings.darkmode;

// Meta | Head //
const filename = "profile.ejs",
    title = "Profile",
    last_edited = "23.11.23 - 11:08",
    description = "Das ist dein Profile auf der Timon.dev Seite.",
    icon = profile_picture,
    icon_type = "jpg",
    og_description = "Das ist dein Profile auf der Timon.dev Seite.",
    og_url = "/profile",
    og_profile_picture = "/root/images/icons/icon.jpg";

%><!DOCTYPE html>
<html lang="de-en">
    <head>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-E0BP9PGK6H"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-E0BP9PGK6H');
        </script>
        <meta charset="utf-8">
        <title><%= title %> | Timon.dev</title>
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <meta name="viewport" width="device-width" initial-scale="1.0">
        <meta name="Owner" content="Timon Fiedler">
        <meta name="Developper" content="Timon Fiedler">
        <meta name="Alias" content="timon.dev">
        <meta name="Last modified" content="<%= last_edited %>">
        <meta name="description" content="<%= description %>">
        <meta name="google" content="nositelinkssearchbox">
        <meta name="robots" content="index,follow">
        <meta name="settings" content="<%= darkmode %>" id="settings_darkmode">
        <meta property="og:title" content="<%= title %> | Timon.dev">
        <meta property="og:url" content="https://www.timondev.vip/<%= og_url %>">
        <meta property="og:description" content="<%= og_description %>">
        <meta property="og:image" content="<%= og_profile_picture %>">
        <meta property="og:image:type" content="image/<%= icon_type %>">      
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link type="text/css" rel="stylesheet" href="/root/stylesheet files/root.min.css">
        <link type="text/css" rel="stylesheet" href="/root/stylesheet files/style.min.css">
        <link type="text/css" rel="stylesheet" href="/root/stylesheet files/font.css">
        <link type="text/css" rel="stylesheet" href="/root/stylesheet files/empty.css" id="stylesheet">
        <link type="text/css" rel="stylesheet" href="/root/stylesheet files/empty.css" id="extra_styles">
        <script type="text/javascript" src="/root/javascript files/global.functions.js"></script>
        <script type="text/javascript" src="/root/javascript files/global.variables.js"></script>
        <script type="text/javascript">constants.username = "<%= username %>"; constants.password = "<%= password%>";</script>
        <script type="text/javascript" src="/root/javascript files/style.files.js"></script>
        <script type="text/javascript" src="/root/javascript files/style.files.profile.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/gsap.min.js"></script>
        <script type="text/javascript" src="/root/javascript files/style.theme.profile.js" defer></script>
        <script type="text/javascript" src="/root/javascript files/nav.js" defer></script>
        <script type="text/javascript" src="/root/javascript files/db.profile_picture.js" defer></script>
        <script type="text/javascript" src="/root/javascript files/header.js" defer></script>
        <script type="text/javascript" src="/root/javascript files/profile.js" defer></script><% 
        if (darkmode) { %> <script type="text/javascript" id="darkmode_script" defer>
            addEventListener("DOMContentLoaded", () => {
                setDarkMode();
                document.getElementById("bb8_toggler").checked = true;
                document.getElementById("darkmode_script").remove();
            });
        </script> <% } %>
        <link type="image/x-icon" rel="icon" href="<%= icon %>" loading="lazy">
    </head>
    <body>
        <header>
            <div class="h_left">
                <div class="h_logo">
                    <img class="h_logo_img"
                         src="/root/images/common/logo.jpg"
                         draggable="false" 
                         ondragstart="return false;">
                    <h1 class="h_logo_text">timon.dev</h1>
                </div>
            </div>
            <div class="h_right">
                <div class="h_github">
                    <button class="h_github_btn" onclick="location.replace('https://github.com/Timon-D3v')">
                        <svg fill="#ffffff" 
                             xmlns="http://www.w3.org/2000/svg" 
                             viewBox="0 0 24 24" 
                             draggable="false" 
                             ondragstart="return false;">
                            <g stroke-width="0" id="SVGRepo_bgCarrier"></g>
                            <g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier"></g>
                            <g id="SVGRepo_iconCarrier">
                                <title>github</title>
                                <rect fill="none" height="24" width="24"></rect>
                                <path d="M12,2A10,10,0,0,0,8.84,21.5c.5.08.66-.23.66-.5V19.31C6.73,19.91,6.14,18,
                                6.14,18A2.69,2.69,0,0,0,5,16.5c-.91-.62.07-.6.07-.6a2.1,2.1,0,0,1,1.53,1,2.15,2.15,
                                0,0,0,2.91.83,2.16,2.16,0,0,1,.63-1.34C8,16.17,5.62,15.31,5.62,11.5a3.87,3.87,0,0,
                                1,1-2.71,3.58,3.58,0,0,1,.1-2.64s.84-.27,2.75,1a9.63,9.63,0,0,1,5,0c1.91-1.29,2.75-1,
                                2.75-1a3.58,3.58,0,0,1,.1,2.64,3.87,3.87,0,0,1,1,2.71c0,3.82-2.34,4.66-4.57,4.91a2.39,
                                2.39,0,0,1,.69,1.85V21c0,.27.16.59.67.5A10,10,0,0,0,12,2Z"></path>
                            </g>
                        </svg>
                        Github
                    </button>
                </div>
                <div class="profile">
                    <img class="profile_picture"
                         id="profile_picture">
                    <div class="username"><p><%= username %></p></div>
                    <div class="profile_menu" id="profile_menu">
                        <a><p><%= first_name + " " + last_name %></p></a>
                        <a href="/" onclick="logout(event)">Log out</a>
                    </div>
                </div>
                <div class="h_menu" id="open_h_menu">
                    <div class="h_stroke"></div>
                </div>
            </div>
        </header>
        <nav>
            <div class="nav">
                <div class="n_header">
                    <div class="n_h_title">
                        <h1 class="n_h_t_text">Navigation</h1>
                    </div>
                    <div class="n_h_close" id="close_h_menu">
                        <div class="n_h_stroke"></div>
                    </div>
                </div>
                <div class="n_main">
                    <a href="/" class="n_m_goTo"
                       onclick="scrollToXY(0, 0, event);
                                document.getElementById('open_h_menu').click()"
                    >Scroll to top</a>
                    <a href="/" class="n_m_goTo"
                       onclick="scrollToQuery('.m_info', event);
                                document.getElementById('open_h_menu').click()">Go to Info</a>
                    <a href="/#contact_form" class="n_m_goTo">Contact Me</a>
                    <a href="/" class="n_m_profile">Go to Home</a>
                    <a href="/" class="n_m_profile" onclick="logout(event);">Log Out</a>
                    <div class="mobile___title">
                        <h1 class="n_m_t_text">Navigation</h1>
                    </div>
                    <div class="mobile___profile">
                        <img class="profile_picture"
                             id="profile_picture_mobile">
                        <div class="username"><p><%= username %></p></div>
                    </div>
                    <div class="mobile___github">
                        <button class="h_github_btn" onclick="location.replace('https://github.com/Timon-D3v')">
                            <svg fill="#ffffff" 
                                 xmlns="http://www.w3.org/2000/svg" 
                                 viewBox="0 0 24 24" 
                                 draggable="false" 
                                 ondragstart="return false;">
                                <g stroke-width="0" id="SVGRepo_bgCarrier"></g>
                                <g stroke-linejoin="round" stroke-linecap="round" id="SVGRepo_tracerCarrier"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <title>github</title>
                                    <rect fill="none" height="24" width="24"></rect>
                                    <path d="M12,2A10,10,0,0,0,8.84,21.5c.5.08.66-.23.66-.5V19.31C6.73,19.91,6.14,18,
                                    6.14,18A2.69,2.69,0,0,0,5,16.5c-.91-.62.07-.6.07-.6a2.1,2.1,0,0,1,1.53,1,2.15,2.15,
                                    0,0,0,2.91.83,2.16,2.16,0,0,1,.63-1.34C8,16.17,5.62,15.31,5.62,11.5a3.87,3.87,0,0,
                                    1,1-2.71,3.58,3.58,0,0,1,.1-2.64s.84-.27,2.75,1a9.63,9.63,0,0,1,5,0c1.91-1.29,2.75-1,
                                    2.75-1a3.58,3.58,0,0,1,.1,2.64,3.87,3.87,0,0,1,1,2.71c0,3.82-2.34,4.66-4.57,4.91a2.39,
                                    2.39,0,0,1,.69,1.85V21c0,.27.16.59.67.5A10,10,0,0,0,12,2Z"></path>
                                </g>
                            </svg>
                            Github
                        </button>
                    </div>
                    <label class="bb8-toggle"
                        copied-from="https://uiverse.io/Galahhad/silent-robin-40"
                        credit-to="https://uiverse.io/profile/Galahhad">
                        <input class="bb8-toggle__checkbox" type="checkbox" id="bb8_toggler">
                        <div class="bb8-toggle__container">
                          <div class="bb8-toggle__scenery">
                            <div class="bb8-toggle__star"></div>
                            <div class="bb8-toggle__star"></div>
                            <div class="bb8-toggle__star"></div>
                            <div class="bb8-toggle__star"></div>
                            <div class="bb8-toggle__star"></div>
                            <div class="bb8-toggle__star"></div>
                            <div class="bb8-toggle__star"></div>
                            <div class="tatto-1"></div>
                            <div class="tatto-2"></div>
                            <div class="gomrassen"></div>
                            <div class="hermes"></div>
                            <div class="chenini"></div>
                            <div class="bb8-toggle__cloud"></div>
                            <div class="bb8-toggle__cloud"></div>
                            <div class="bb8-toggle__cloud"></div>
                          </div>
                          <div class="bb8">
                            <div class="bb8__head-container">
                              <div class="bb8__antenna"></div>
                              <div class="bb8__antenna"></div>
                              <div class="bb8__head"></div>
                            </div>
                            <div class="bb8__body"></div>
                          </div>
                          <div class="artificial__hidden">
                            <div class="bb8__shadow"></div>
                          </div>
                        </div>
                      </label>
                </div>
            </div>
        </nav>
        <main>
            <div class="management">
                <img class="m_profile_picture"
                     src="<%= profile_picture %>"
                     alt="This is you :)"
                     draggable="false"
                     ondragstart="return false;">
                <div class="m_name">
                    <div><%= username %></div>
                    <div><%= first_name + " " + last_name %></div>
                </div>
                <div class="m_edit">
                    <img src="/root/images/svg/edit.svg"
                         draggable="false"
                         ondragstart="return false;">
                </div>
                <div class="m_info">
                    <div>E-Mail: <%= email %></div>
                    <div>Phone Number: <%= phone_number %></div>
                    <div class="m_info_bot">Password: 
                        <span id="password_span"><% for (let i = 0; i < password.length; i++) { %>*<% }; %></span>
                    </div>
                    <div class="m_info_bot">Account created: <%= account_created %></div>
                </div>
                <div class="m_preferences">
                    <div>
                        <div>Preffered mode:</div>
                        <label class="uiverse_theme">
                            <input class="uiverse_input" type="checkbox" id="pref_btn_dl" <% if (darkmode) { %> checked="checked" <% } %>>
                            <svg width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" 
                                stroke-linecap="round" stroke="currentColor" height="24" fill="none" 
                                class="uiverse_icon uiverse_icon-sun">
                                <circle r="5" cy="12" cx="12"></circle>
                                <line y2="3" y1="1" x2="12" x1="12"></line>
                                <line y2="23" y1="21" x2="12" x1="12"></line>
                                <line y2="5.64" y1="4.22" x2="5.64" x1="4.22"></line>
                                <line y2="19.78" y1="18.36" x2="19.78" x1="18.36"></line>
                                <line y2="12" y1="12" x2="3" x1="1"></line>
                                <line y2="12" y1="12" x2="23" x1="21"></line>
                                <line y2="18.36" y1="19.78" x2="5.64" x1="4.22"></line>
                                <line y2="4.22" y1="5.64" x2="19.78" x1="18.36"></line>
                            </svg>
                            <svg viewBox="0 0 24 24" class="uiverse_icon uiverse_icon-moon">
                                <path d="m12.3 4.9c.4-.2.6-.7.5-1.1s-.6-.8-1.1-.8c-4.9.1-8.7 4.1-8.7 
                                        9 0 5 4 9 9 9 3.8 0 7.1-2.4 8.4-5.9.2-.4 0-.9-.4-1.2s-.9-.2-1.2.1c-1 
                                        .9-2.3 1.4-3.7 1.4-3.1 0-5.7-2.5-5.7-5.7 0-1.9 1.1-3.8 2.9-4.8zm2.8 
                                        12.5c.5 0 1 0 1.4-.1-1.2 1.1-2.8 1.7-4.5 1.7-3.9 0-7-3.1-7-7 0-2.5 
                                        1.4-4.8 3.5-6-.7 1.1-1 2.4-1 3.8-.1 4.2 3.4 7.6 7.6 7.6z">
                                </path>
                            </svg>
                        </label>
                    </div>
                    <div>
                        <div>Show Password:</div>
                        <button class="pref_btn" id="pref_btn">Show</button>
                    </div>
                </div>
            </div>
            <div class="edit_wrapper">
                <div class="edit">
                    <form method="POST" action="/post/profile/edit">
                        <h1 class="title">Edit</h1>
                        <label for="username" class="username_l">
                            Username
                        </label>
                        <input class="username_form"
                            id="username"
                            type="text"
                            name="username"
                            autocomplete="username"
                            placeholder="<%= username %>">
                        <label for="first_name" class="first_name_l">
                            First Name
                        </label>
                        <input class="first_name"
                            id="first_name"
                            type="text"
                            name="first_name"
                            autocomplete="given-name"
                            placeholder="<%= first_name %>">
                        <label for="last_name" class="last_name_l">
                            Last Name
                        </label>
                        <input class="last_name"
                            id="last_name"
                            type="text"
                            name="last_name"
                            autocomplete="family-name"
                            placeholder="<%= last_name %>">
                        <label for="email" class="email_l">
                            E-Mail
                        </label>
                        <input class="email"
                            id="email"
                            name="email"
                            type="email"
                            autocomplete="email"
                            placeholder="<%= email %>">
                        <label for="phone" class="phone_l">
                            Phone Number
                        </label>
                        <input class="phone"
                            id="phone"
                            type="tel"
                            name="phone"
                            autocomplete="tel"
                            placeholder="<%= phone_number %>">
                        <label for="password" class="password_l">
                            Password
                        </label>
                        <input class="password"
                            id="password"
                            type="password"
                            name="password"
                            autocomplete="new-password"
                            placeholder="<%= password %>">
                        <label for="file" class="file_l">
                            <svg class="svg-icon" width="24" viewBox="0 0 24 24" height="24" fill="none">
                                <g stroke-width="2" stroke-linecap="round" stroke="#056dfa" fill-rule="evenodd" clip-rule="evenodd">
                                    <path d="m3 7h17c.5523 0 1 .44772 1 1v11c0 .5523-.4477 1-1 1h-16c-.55228 0-1-.4477-1-1z"></path>
                                    <path d="m3 4.5c0-.27614.22386-.5.5-.5h6.29289c.13261 0 .25981.05268.35351.14645l2.8536 2.85355h-10z"></path>
                                </g>
                            </svg>
                            <span class="lable">Picture</span>
                        </label>
                        <input class="file"
                            id="file"
                            type="file"
                            name="file"
                            accept="image/png, image/jpg, image/gif, image/jpeg, image/tiff, image/psd, image/eps, image/ai, image/indd, image/raw">
                        <input type="text" id="file_c" name="file_c" style="display: none;">
                        <button class="submit" type="submit">
                            Change
                        </button>
                        <a class="signup">To not change a field, leave blank.</a>
                    </form>
                    <script>
                        const img_input = document.getElementById("file");
                        var uploaded_img;
                        img_input.addEventListener("change", () => {
                            const reader = new FileReader();
                            reader.addEventListener("load", () => {
                                uploaded_img = reader.result;
                                document.getElementById("file_c").value = uploaded_img;
                                console.log("Finished uploading");
                                document.querySelector(".file_l").style.backgroundColor = "#62C370";
                                document.querySelector(".lable").innerHTML = "Success!"
                            });
                            try {
                                reader.readAsDataURL(document.getElementById("file").files[0]);
                            } catch {
                                document.querySelector(".file_l").style.backgroundColor = "#F21B3F";
                                document.querySelector(".lable").innerHTML = "Try again!";
                            };
                        });
                    </script>
                </div>
            </div>
        </main>
        <footer>
            <img class="main>footer"
                 id="main_to_footer_svg"
                 src="/root/images/svg/main_to_footer_light.svg"
                 draggable="false"
                 ondragstart="return false;"
                 loading="lazy">
            <div class="footer">
                <div class="footer_container">
                    <h3>Imprint</h3>
                    <a href="https://app.haikei.app">Transition SVGs: haikei.app</a>
                </div>
                <div class="footer_container">
                    <h3>Project Links</h3>
                    <a href="/projects/original">- My very first Website</a>
                    <a href="/project2">- Project 2</a>
                    <a href="/project3">- Project 3</a>
                    <a href="/project4">- Project 4</a>
                </div>
                <div class="footer_container">
                    <h3>Navigation</h3>
                    <a href="/" onclick="scrollToXY(0, 0, event);">Scroll to top</a>
                    <a href="/">Go to Home</a>
                    <a href="/#contact_form">Contact Me</a>
                    <a href="/" onclick="logout(event);">Log Out</a>
                </div>
                <img class="footer_img" 
                     src="/root/images/svg/footer_forest.svg"
                     draggable="false"
                     ondragstart="return false;"
                     loading="lazy">
            </div>
        </footer>
    </body>
</html>